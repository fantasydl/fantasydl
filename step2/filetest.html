<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>file图片预览</title>
	<style type="text/css">
		#newpic{
			width: 200px;
			height: 200px;
		}
		img{
			width: 200px;
			height: 200px;
			border-radius: 50%;
			overflow: hidden;
		}
	</style>
	<script src="http://www.codefans.net/ajaxjs/jquery-1.6.2.min.js"></script>
</head>
<body>
	<h3>请选择图片文件：JPG/GIF</h3>
	<form name="form0" id="form0">
		<input type="file" name="file0" id="file0" /><br/>
	</form>
	<div id="newpic"></div>
	<script>	
	$("#file0").change(function(){
		var objUrl = getObjectURL(this.files[0]) ;
		console.log("objUrl = "+objUrl) ;
		if (objUrl) {
			var rurl = '<div><img src="' + objUrl + '" /></div>'
			$("#newpic").before(rurl);
		}
	}) ;
	//建立一個可存取到該file的url
	function getObjectURL(file) {
		var url = null ; 
		if (window.createObjectURL!=undefined) { // basic
			url = window.createObjectURL(file) ;
		} else if (window.URL!=undefined) { // mozilla(firefox)
			url = window.URL.createObjectURL(file) ;
		} else if (window.webkitURL!=undefined) { // webkit or chrome
			url = window.webkitURL.createObjectURL(file) ;
		}
		return url ;
	}
	</script>
</body>
</html>